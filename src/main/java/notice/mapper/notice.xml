<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="notice">

	<insert id="write" parameterType="notice.dto.NoticeDTO">
	insert into notice (id, writer, title, notice_content, post_category, fix, filesize, filename)  
	values (notice_id_seq.nextval, #{writer}, #{title}, #{notice_content}, #{post_category}, #{fix}, #{filesize}, #{filename})	
	</insert>

	<select id="list" resultType="notice.dto.NoticeDTO">
	select * 
    from
    (select rownum rn, a.*
	from (select * from notice
    <if test="category!=null and category!=''">
	where post_category = #{category}
	</if>
	order by fix desc, id desc) a)
    where rn between #{start} and #{end}
	</select>


	<select id="view" parameterType="int" resultType="notice.dto.NoticeDTO">
	select * from notice where id = #{id}
	</select>
	
	<update id="updateViewCount" parameterType="int">
	update
	set view_count = view_count+1
	where id=#{id}
	
	</update>
	
	<select id="count" resultType="int">
	select count(*)
    from notice
    <if test="category!=null and category!=''">
	where post_category = #{category}
	</if>
	</select>
	
	
	
	
</mapper>